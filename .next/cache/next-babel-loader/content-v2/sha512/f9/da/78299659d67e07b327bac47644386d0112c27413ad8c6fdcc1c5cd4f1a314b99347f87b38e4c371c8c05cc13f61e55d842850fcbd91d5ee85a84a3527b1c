{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Container } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport { Route, Switch, Redirect, useLocation } from 'react-router-dom';\nimport useSessionStorage from '../../hooks/useSessionStorage';\nimport ErrorBoundary from '../error/ErrorBoundary';\nimport GenresFilter from './GenresFilter';\nimport MovieList from './movieList/MovieList';\nimport MoviesSorter from './MoviesSorter';\nimport './body.scss';\n\nvar Body = function Body(_ref) {\n  _s();\n\n  var movies = _ref.movies,\n      loadMovies = _ref.loadMovies;\n\n  var _useSessionStorage = useSessionStorage('filter'),\n      _useSessionStorage2 = _slicedToArray(_useSessionStorage, 2),\n      currentFilter = _useSessionStorage2[0],\n      setCurrentFilter = _useSessionStorage2[1];\n\n  var _useSessionStorage3 = useSessionStorage('sort'),\n      _useSessionStorage4 = _slicedToArray(_useSessionStorage3, 2),\n      currentSort = _useSessionStorage4[0],\n      setCurrentSort = _useSessionStorage4[1];\n\n  var searchQuery = useLocation().search;\n  var query = new URLSearchParams(searchQuery).get('search');\n  useEffect(function () {\n    loadMovies(currentFilter, currentSort, query);\n  }, [currentFilter, currentSort, query, loadMovies]);\n\n  var onFilterClick = function onFilterClick(genre) {\n    setCurrentFilter(genre);\n  };\n\n  var onSortChange = function onSortChange(sort) {\n    setCurrentSort(sort);\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"body\",\n    fixed: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submenu\"\n  }, /*#__PURE__*/React.createElement(GenresFilter, {\n    onFilterClick: onFilterClick,\n    selectedFilter: currentFilter\n  }), /*#__PURE__*/React.createElement(MoviesSorter, {\n    onSortChange: onSortChange,\n    selectedSort: currentSort\n  })), /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    exact: true\n  }, /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/movies\"\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/movies\"\n  }, !(movies !== null && movies !== void 0 && movies.length) ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"no-movies\"\n  }, \"No Movies Found\")) : /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(MovieList, {\n    movies: movies\n  }))), /*#__PURE__*/React.createElement(Route, {\n    path: \"*\"\n  }, /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/pagenotfound\"\n  }))));\n};\n\n_s(Body, \"VTshKYQIgZ0WEOTHTkgDQxa8GX4=\", false, function () {\n  return [useSessionStorage, useSessionStorage, useLocation];\n});\n\n_c = Body;\nBody.propTypes = {\n  movies: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    title: PropTypes.string.isRequired,\n    poster_path: PropTypes.string,\n    release_date: PropTypes.string,\n    genres: PropTypes.arrayOf(PropTypes.string),\n    vote_average: PropTypes.number,\n    tagline: PropTypes.string,\n    vote_count: PropTypes.number,\n    overview: PropTypes.string,\n    budget: PropTypes.number,\n    revenue: PropTypes.number,\n    runtime: PropTypes.number\n  })).isRequired,\n  loadMovies: PropTypes.func.isRequired\n};\nexport default Body;\n\nvar _c;\n\n$RefreshReg$(_c, \"Body\");","map":{"version":3,"sources":["C:/projects/react-trainings/react-movies/src/components/body/Body.js"],"names":["React","useEffect","Container","PropTypes","Route","Switch","Redirect","useLocation","useSessionStorage","ErrorBoundary","GenresFilter","MovieList","MoviesSorter","Body","movies","loadMovies","currentFilter","setCurrentFilter","currentSort","setCurrentSort","searchQuery","search","query","URLSearchParams","get","onFilterClick","genre","onSortChange","sort","length","propTypes","arrayOf","shape","id","number","isRequired","title","string","poster_path","release_date","genres","vote_average","tagline","vote_count","overview","budget","revenue","runtime","func"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\n\nimport { Container } from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport { Route, Switch, Redirect, useLocation } from 'react-router-dom';\n\nimport useSessionStorage from '../../hooks/useSessionStorage';\nimport ErrorBoundary from '../error/ErrorBoundary';\n\nimport GenresFilter from './GenresFilter';\nimport MovieList from './movieList/MovieList';\nimport MoviesSorter from './MoviesSorter';\nimport './body.scss';\n\nconst Body = ({ movies, loadMovies }) => {\n  const [currentFilter, setCurrentFilter] = useSessionStorage('filter');\n  const [currentSort, setCurrentSort] = useSessionStorage('sort');\n  const searchQuery = useLocation().search;\n  const query = new URLSearchParams(searchQuery).get('search');\n\n  useEffect(() => {\n    loadMovies(currentFilter, currentSort, query);\n  }, [currentFilter, currentSort, query, loadMovies]);\n\n  const onFilterClick = (genre) => {\n    setCurrentFilter(genre);\n  };\n\n  const onSortChange = (sort) => {\n    setCurrentSort(sort);\n  };\n\n  return (\n    <Container className=\"body\" fixed>\n      <div className=\"submenu\">\n        <GenresFilter\n          onFilterClick={onFilterClick}\n          selectedFilter={currentFilter}\n        />\n        <MoviesSorter onSortChange={onSortChange} selectedSort={currentSort} />\n      </div>\n      <Switch>\n        <Route path=\"/\" exact>\n          <Redirect to=\"/movies\" />\n        </Route>\n        <Route path=\"/movies\">\n          {!movies?.length ? (\n            <div>\n              <p className=\"no-movies\">No Movies Found</p>\n            </div>\n          ) : (\n            <ErrorBoundary>\n              <MovieList movies={movies} />\n            </ErrorBoundary>\n          )}\n        </Route>\n        <Route path=\"*\">\n          <Redirect to=\"/pagenotfound\" />\n        </Route>\n      </Switch>\n    </Container>\n  );\n};\n\nBody.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      title: PropTypes.string.isRequired,\n      poster_path: PropTypes.string,\n      release_date: PropTypes.string,\n      genres: PropTypes.arrayOf(PropTypes.string),\n      vote_average: PropTypes.number,\n      tagline: PropTypes.string,\n      vote_count: PropTypes.number,\n      overview: PropTypes.string,\n      budget: PropTypes.number,\n      revenue: PropTypes.number,\n      runtime: PropTypes.number,\n    })\n  ).isRequired,\n  loadMovies: PropTypes.func.isRequired,\n};\n\nexport default Body;\n"]},"metadata":{},"sourceType":"module"}